package com.xja.yygh.hosp.controller.api;import com.xja.yygh.common.exception.YyghException;import com.xja.yygh.common.helper.HttpRequestHelper;import com.xja.yygh.common.result.ResultCodeEnum;import com.xja.yygh.common.util.MD5;import com.xja.yygh.hosp.service.HospitalSetService;import javax.servlet.http.HttpServletRequest;import java.util.Map;/** * @Author xiaoYan * @Data 2022/12/11 12:15 * 时间不早了  注意休息 */public class ApiTool {    /**    * @return java.util.Map<java.lang.String,java.lang.Object>    * @author xiaoYan    * @params [request]    * @date 2022/12/14 19:51     * 获取json    */    public static  Map<String, Object> getParameterMapDispose(HttpServletRequest request){        Map<String, String[]> requestMap = request.getParameterMap();        Map<String, Object> paramMap = HttpRequestHelper.switchMap(requestMap);        return paramMap;    }    /**    * @return java.lang.String    * @author xiaoYan    * @params [paramMap, hospitalSetService]    * @date 2022/12/14 19:51     * 查询是否存在医院编号    */    public static String existHosp(Map<String, Object> paramMap, HospitalSetService hospitalSetService){        //获取传递过来的医院信息        String hoscode = (String) paramMap.get("hoscode");        //1 获取医院系统传递过来的签名        String hoshSign = (String) paramMap.get("sign");        //2 根据传过来的医院编码  查询数据库        String signKey = hospitalSetService.getSignKey(hoscode);        //3 把数据库查询的签名进行md5加密        String encrypt = MD5.encrypt(signKey);        //进行对比        if (!encrypt.equals(hoshSign)){            throw new YyghException(ResultCodeEnum.SIGN_ERROR);        }        return hoscode;    }}